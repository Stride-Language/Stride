use DesktopAudio version 1.0

signal ValueInOSCDomain {
    domain: OSCInDomain
}

module TestMod {
  ports:          [
    mainOutputPort OutputPort {
        block:      Output
    }
    propertyInputPort ValuePort {
        name: "value"
        block:      Value
    }
  ]
  blocks:         []
  streams: [
            Value >> Output;
  ]
}

module TestMod2 {
  ports:          [
    mainOutputPort OutputPort {
        block:      Output
    }
    mainInputPort InputPort {
        block:      Input
    }
    propertyInputPort ValuePort {
        name: "value"
        block:      Value
    }
  ]
  blocks:         [
      signal Input[2] {}
  ]
  streams: [
            Input[1] * Input[2] * Value >> Output;
  ]
}

[ TestMod(value: 10) , 1024.0] >> TestMod2(value: 1.5) >> ValueInOSCDomain;

TestMod(value: ValueInOSCDomain) >> AudioOut;

# Default domain should be set to platform domain

signal Modulator {}
TestMod(value: 5) >> Modulator;
TestMod(value:Modulator) >> AudioOut;

AudioIn[1] >> TestMod2(value: 0.1) >> Signal;
